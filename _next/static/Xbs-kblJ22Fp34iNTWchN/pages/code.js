(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{HMjY:function(e,t,n){"use strict";var r=n("hDBU"),a=n("mXGw"),c=n.n(a),u=n("bBV7"),i=n("wOhW"),o=n("DomE"),s=n("vjOZ"),l=n("nKah"),d=n("Rbzu"),h=n("z3IF"),f=n("2Fjn"),p=n("8Jek"),w=n.n(p),b=n("2huS"),m=n("m0Sz"),j=function(e){var t=e.children,n=e.className,r=Object(f.a)(e,["children","className"]);return c.a.createElement(m.a,Object(h.a)({},r,{className:w()("box",n)}),t)};j.defaultProps=Object(d.a)({},b.a.defaultProps,{children:null,className:void 0,style:void 0,renderAs:"div"});var v=j,O=(n("DoJ4"),v),E=n("sLSl"),k=function(){return c.a.createElement(o.a,null,c.a.createElement(O,null,c.a.createElement(E.a,null)))};t.a=Object(u.withRouter)(function(e){var t=e.children,n=e.router,a=e.role,u=e.redirect,o=Object(s.useMachine)(l.a.withContext({route:n.pathname,role:a,redirect:u})),d=Object(r.default)(o,1)[0];return c.a.createElement(i.a,null,d.matches("init")||d.matches("authorize")?c.a.createElement(k,null):t)})},nKah:function(e,t,n){"use strict";var r=n("UrUy"),a=n.n(r),c=n("R3/3"),u=n("ioJY"),i=n("8q3D"),o=n("TKeM");t.a=Object(u.Machine)({id:"protected",initial:"init",states:{init:{invoke:{id:"initAuth",src:function(){var e=Object(c.default)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)();case 2:return t=e.sent,e.next=5,t.authenticate();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),onDone:{target:"authorize",actions:Object(u.assign)({userId:function(e,t){return t.data.userId}})},onError:{actions:function(e){return o.a.push("".concat(e.redirect||"/sign_up","?redirect=").concat(e.route).concat(location.search?"&"+location.search.substr(1):""))}}}},authorize:{invoke:{id:"authorize",src:function(){var e=Object(c.default)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.role){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(i.a)();case 4:return n=e.sent,e.next=7,n.service("users").get(t.userId);case 7:if(-1!==e.sent.roles.split(",").indexOf(t.role)){e.next=10;break}throw new Error("unauthorized");case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onDone:{target:"signed_in"},onError:{actions:function(){return o.a.push("/home")}}}},signed_in:{on:{SIGN_OUT:{actions:function(){return o.a.push("/")}}}}}})},osjh:function(e,t,n){"use strict";n.r(t);var r=n("mXGw"),a=n.n(r),c=n("HMjY");t.default=function(){return a.a.createElement(c.a,null,"protected code page")}},wkjo:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/code",function(){var e=n("osjh");return{page:e.default||e}}])}},[["wkjo",1,0,2]]]);